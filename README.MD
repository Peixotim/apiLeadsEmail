# ğŸ“§ API Leads and Emails - RJGLOBAL

Este projeto Ã© uma API construÃ­da com **Spring Boot 3** e **Java 17**, responsÃ¡vel pelo gerenciamento de **leads** e pelo **envio de e-mails** da plataforma RJGLOBAL.  
Ela fornece endpoints para autenticaÃ§Ã£o, cadastro e consulta de leads, envio de mensagens e integraÃ§Ã£o com serviÃ§os externos.

---

## ğŸš€ Tecnologias Utilizadas

- **Java 17**
- **Spring Boot 3**
- **Spring Security (JWT)**
- **Spring Data JPA**
- **PostgreSQL**
- **Supabase** (autenticaÃ§Ã£o e persistÃªncia)
- **Lombok**
- **Maven**

---

## ğŸ“‚ Estrutura do Projeto

```
src/main/java/digital/rj/apileadsandemails
â”‚
â”œâ”€â”€ Security/                  # ConfiguraÃ§Ã£o de seguranÃ§a (JWT, filtros, CORS)
â”‚   â”œâ”€â”€ Configuration/          # Beans de configuraÃ§Ã£o (SecurityConfig, etc.)
â”‚   â”œâ”€â”€ Filter/                 # JwtAuthFilter e outros filtros
â”‚
â”œâ”€â”€ Leads/                      # DomÃ­nio de leads
â”‚   â”œâ”€â”€ Controller/             # Controllers REST para leads
â”‚   â”œâ”€â”€ Model/                  # Entidades e enums (Lead, Foco, etc.)
â”‚   â”œâ”€â”€ Repository/             # RepositÃ³rios JPA
â”‚   â”œâ”€â”€ Service/                # Regras de negÃ³cio
â”‚
â”œâ”€â”€ Email/                      # DomÃ­nio de e-mails
â”‚   â”œâ”€â”€ Controller/             # Controllers REST para envio de e-mails
â”‚   â”œâ”€â”€ Model/                  # DTOs de requisiÃ§Ã£o e resposta
â”‚   â”œâ”€â”€ Service/                # ServiÃ§os para envio de e-mails
â”‚
â””â”€â”€ ApiLeadsAndEmailsApplication.java   # Classe principal da aplicaÃ§Ã£o
```

---

## ğŸ”‘ AutenticaÃ§Ã£o

A API utiliza **JWT (JSON Web Token)** para autenticaÃ§Ã£o e autorizaÃ§Ã£o.

### Fluxo bÃ¡sico:
1. O usuÃ¡rio autentica via `/auth/login` com email/senha.
2. Recebe um token JWT vÃ¡lido.
3. Deve incluir o token no header `Authorization: Bearer <token>` para acessar rotas protegidas.

Rotas pÃºblicas como `/auth/**` e `POST /email` estÃ£o liberadas.

---

## ğŸ“¡ Endpoints Principais

### AutenticaÃ§Ã£o
- `POST /auth/register` â†’ Registrar novo usuÃ¡rio
- `POST /auth/login` â†’ Autenticar e receber token JWT

### Leads
- `GET /leads` â†’ Listar leads (protegido)
- `POST /leads` â†’ Criar lead
- `DELETE /leads/{id}` â†’ Remover lead (protegido)

### E-mails
- `POST /email` â†’ Enviar e-mail (pÃºblico)
  ```json
  {
    "name": "Pedro Almeida",
    "email": "contato@exemplo.com",
    "phone": "(31) 99999-9999",
    "enterprise": "Minha Empresa",
    "foco": "POSGRADUCAO",
    "body": "Mensagem do contato..."
  }
  ```

---

## ğŸŒ± VariÃ¡veis de Ambiente

Antes de rodar a aplicaÃ§Ã£o, defina as seguintes variÃ¡veis de ambiente (por exemplo, em um arquivo `.env` ou no sistema operacional):

```bash
# Banco de Dados
DB_URL=jdbc:postgresql://localhost:5432/db
DB_USERNAME=postgres
DB_PASSWORD=postgres

# E-mail (SMTP)
MAIL_HOST=smtp.gmail.com
MAIL_PORT=587
MAIL_PROTOCOL=smtp
MAIL_USERNAME=seuemail@gmail.com
MAIL_PASSWORD=senha_de_app_gerada_no_provedor

# JWT
SECRET_KEY=sua_chave_secreta_segura
```

> âš ï¸ **AtenÃ§Ã£o:**
> - O `MAIL_PASSWORD` deve ser uma **senha de aplicativo** gerada no Gmail (ou no provedor de e-mail que vocÃª utilizar).
> - Nunca versionar o `.env` com dados reais.
> - Em produÃ§Ã£o, configure essas variÃ¡veis no servidor ou container (ex.: Docker, Supabase, Railway, Heroku etc).

---

## âš™ï¸ ConfiguraÃ§Ã£o e ExecuÃ§Ã£o

### PrÃ©-requisitos
- **Java 17+**
- **Maven**
- **PostgreSQL** rodando localmente ou remoto

### Rodando a aplicaÃ§Ã£o
```bash
# Clonar repositÃ³rio
git clone https://github.com/seu-usuario/api-leads-and-emails.git
cd api-leads-and-emails

# Rodar aplicaÃ§Ã£o (dev)
mvn spring-boot:run

# Buildar aplicaÃ§Ã£o
mvn clean package
java -jar target/api-leads-and-emails-0.0.1-SNAPSHOT.jar
```

---

## ğŸ”’ CORS

A configuraÃ§Ã£o de CORS libera a origem do frontend (`http://localhost:3000`) para permitir que o site RJGLOBAL consuma a API sem erros de preflight.  
Quando for para produÃ§Ã£o, configure o domÃ­nio correto no `SecurityConfig`.

---

## ğŸ³ Docker

Um `Dockerfile` pode ser criado para facilitar o deploy:

```dockerfile
FROM openjdk:17-jdk-slim
WORKDIR /app
COPY target/api-leads-and-emails-0.0.1-SNAPSHOT.jar app.jar
EXPOSE 8080
ENTRYPOINT ["java", "-jar", "app.jar"]
```

Build & Run:
```bash
docker build -t rjglobal-api .
docker run -p 8080:8080 rjglobal-api
```

---

## ğŸ“œ LicenÃ§a

Este projeto Ã© distribuÃ­do sob a licenÃ§a MIT. Veja o arquivo [LICENSE](LICENSE) para mais detalhes.
